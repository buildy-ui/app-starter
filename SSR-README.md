# –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ SSR –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å Elysia + LmDB

## –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

```
Browser ‚Üê‚Üí Elysia Server ‚Üê‚Üí LmDB Cache ‚Üê‚Üí GraphQL API
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
- GraphQL endpoint —Å–∫—Ä—ã—Ç –æ—Ç –±—Ä–∞—É–∑–µ—Ä–∞
- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç —á–µ—Ä–µ–∑ –≤–∞—à —Å–µ—Ä–≤–µ—Ä
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –∏ rate limiting

### üöÄ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- –î–∞–Ω–Ω—ã–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –≤ LmDB (–±—ã—Å—Ç—Ä–µ–µ Redis)
- SSR —É–º–µ–Ω—å—à–∞–µ—Ç –≤—Ä–µ–º—è First Contentful Paint
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤

### üìä **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–≤
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –∫—ç—à
- API-first –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### Elysia
–õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è Bun —Å –æ—Ç–ª–∏—á–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é:

```typescript
import { Elysia } from 'elysia'

const app = new Elysia()
  .get('/api/posts', async () => {
    // –í–∞—à API –∫–æ–¥
  })
```

### LmDB
–í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–∞—è –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è –ë–î:

```typescript
import { Database } from 'lmdb'

const db = new Database('./data/cache', {
  cacheSize: 100 * 1024 * 1024 // 100MB
})

// –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å TTL
db.put('posts', { data: posts, timestamp: Date.now() })
```

## –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### –¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚Üí –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```typescript
// –ë—ã–ª–æ: –∫–ª–∏–µ–Ω—Ç –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã
const posts = await fetchGraphQL(query)

// –°—Ç–∞–Ω–µ—Ç: —Å–µ—Ä–≤–µ—Ä –∫—ç—à–∏—Ä—É–µ—Ç –∏ –æ—Ç–¥–∞–µ—Ç
app.get('/api/posts', async () => {
  return await getCachedPosts()
})
```

## API Endpoints

```
/api/posts       - –°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤
/api/post/:id    - –û–¥–∏–Ω–æ—á–Ω—ã–π –ø–æ—Å—Ç
/api/categories  - –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
/api/tags        - –¢–µ–≥–∏
/ssr/*          - SSR —Å—Ç—Ä–∞–Ω–∏—Ü—ã
```

## –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

```typescript
// –†–∞–∑–Ω—ã–µ TTL –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
const CACHE_TTL = {
  posts: 5 * 60 * 1000,      // 5 –º–∏–Ω—É—Ç
  post: 10 * 60 * 1000,      // 10 –º–∏–Ω—É—Ç
  categories: 60 * 60 * 1000, // 1 —á–∞—Å
  static: 24 * 60 * 60 * 1000 // 24 —á–∞—Å–∞
}
```

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
bun add elysia lmdb @elysiajs/html

# –ó–∞–ø—É—Å–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
NODE_ENV=production bun run server.ts
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- **–ú–µ—Ç—Ä–∏–∫–∏ –∫—ç—à–∞**: hit/miss ratio
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ GraphQL API**
- **–†–∞–∑–º–µ—Ä LmDB –±–∞–∑—ã**
- **SSR –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–°–æ–∑–¥–∞—Ç—å Elysia —Å–µ—Ä–≤–µ—Ä** (`server.ts`)
2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å LmDB** –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
3. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å SSR —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥** —Å—Ç—Ä–∞–Ω–∏—Ü
4. **–ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** –Ω–∞ —Å–µ—Ä–≤–µ—Ä–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö
5. **–î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## –§–∞–π–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è

- `server-example.ts` - –ø—Ä–∏–º–µ—Ä —Å–µ—Ä–≤–µ—Ä–∞
- `env.example` - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Elysia: https://elysiajs.com/
- LmDB –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://github.com/kriszyp/lmdb-js
